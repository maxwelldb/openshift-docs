:_mod-docs-content-type: ASSEMBLY
[id="understanding-persistent-storage"]
= Understanding persistent storage

include::_attributes/common-attributes.adoc[]
:context: understanding-persistent-storage

toc::[]

include::modules/storage-persistent-storage-overview.adoc[leveloffset=+1]

include::modules/storage-persistent-storage-lifecycle.adoc[leveloffset=+1]

include::modules/storage-persistent-storage-reclaim-manual.adoc[leveloffset=+2]

include::modules/storage-persistent-storage-reclaim.adoc[leveloffset=+2]

include::modules/storage-persistent-storage-pv.adoc[leveloffset=+1]

ifndef::openshift-dedicated,openshift-rosa,openshift-rosa-hcp[]
[role="_additional-resources"]
.Additional resources
* xref:../storage/container_storage_interface/persistent-storage-csi-vsphere.adoc#persistent-storage-csi-vsphere-rwx_persistent-storage-csi-vsphere[ReadWriteMany vSphere volume support]
endif::openshift-dedicated,openshift-rosa,openshift-rosa-hcp[]
ifdef::openshift-rosa,openshift-rosa-hcp[]
[role="_additional-resources"]
.Additional resources
* xref:../storage/container_storage_interface/persistent-storage-csi.adoc#persistent-storage-csi[Configuring CSI volumes]
endif::openshift-rosa,openshift-rosa-hcp[]

include::modules/storage-persistent-storage-pvc.adoc[leveloffset=+1]

ifndef::openshift-dedicated,openshift-rosa,openshift-rosa-hcp[]
include::modules/storage-persistent-storage-pvc-volumeattributesclass.adoc[leveloffset=+2]
endif::[]

ifndef::openshift-dedicated,openshift-rosa,openshift-rosa-hcp[]
[role="_additional-resources"]
.Additional resources
* xref:../nodes/clusters/nodes-cluster-enabling-features.adoc#nodes-cluster-enabling-features[Enabling {product-title} features using FeatureGates]
endif::openshift-dedicated,openshift-rosa,openshift-rosa-hcp[]

include::modules/storage-persistent-storage-block-volume.adoc[leveloffset=+1]

// As these volumes have transitioned to being tech preview per plugin,
// this notice has been included in the previous module.
// :FeatureName: Support for raw block volumes in the volume plugins listed above
// include::snippets/technology-preview.adoc[leveloffset=+1]

include::modules/storage-persistent-storage-block-volume-examples.adoc[leveloffset=+2]

//include::modules/storage-persistent-storage-change-policy-overview.adoc[leveloffset=+1] testing to see if I prefer letting this be two separate things (fsGroup and SELinux) as opposed to trying to tie them together.

include::modules/storage-persistent-storage-fsGroup.adoc[leveloffset=+1]

include::modules/storage-persistent-storage-fsGroup-namespace.adoc[leveloffset=+2]

include::modules/storage-persistent-storage-fsGroup-pod.adoc[leveloffset=+2]

include::modules/storage-persistent-storage-selinuxChangePolicy.adoc[leveloffset=+1]

To assist you with the upcoming move to the mount option default, {product-title} 4.20 reports SELinux-related conflicts when creating pods, and on running pods, to make you aware of potential conflicts, and to help you resolve them. For more information about this reporting, see this link:https://access.redhat.com/solutions/7131398[Kowledge Base article].

If you are unable to resolve the SELinux-related conflicts, you can proactively opt-out of the future move to mount option as default for selected pods or namespaces. To opt out, see _Opting out of the SELinux mount option default_.

include::modules/storage-persistent-storage-selinuxChangePolicy-testing-mountoption-RWO-RWX.adoc[leveloffset=+2]

Carefully test your applications and observe how they are using storage. Consult this link:https://access.redhat.com/solutions/7131398[Knowledge Base article] and consider opting out from using mount option if you are experiencing issues. See Section _Opting out of the SELinux mount option default_.

include::modules/storage-persistent-storage-selinuxChangePolicy-opt-out.adoc[leveloffset=+2]

include::modules/storage-persistent-storage-selinuxChangePolicy-namespace.adoc[leveloffset=+3]

include::modules/storage-persistent-storage-selinuxChangePolicy-pod.adoc[leveloffset=+3]

