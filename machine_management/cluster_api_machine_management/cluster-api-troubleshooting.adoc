:_mod-docs-content-type: ASSEMBLY
[id="cluster-api-troubleshooting"]
= Troubleshooting clusters that use the Cluster API

include::_attributes/common-attributes.adoc[]
:context: cluster-api-troubleshooting

toc::[]

:FeatureName: Managing machines with the Cluster API
include::snippets/technology-preview.adoc[]

Use the information in this section to understand and recover from issues you might encounter.
Generally, troubleshooting steps for problems with the Cluster API are similar to those steps for problems with the Machine API.

The {cluster-capi-operator} and its operands are provisioned in the `openshift-cluster-api` namespace, whereas the Machine API uses the `openshift-machine-api` namespace. When using `oc` commands that reference a namespace, be sure to reference the correct one.

//Returning the intended machines when using the CLI
include::modules/ts-capi-cli-reference-intended-objects.adoc[leveloffset=+1]

//Duplicated machine set and machine resources
include::modules/ts-capi-sync-list-duplicate-resources.adoc[leveloffset=+1]

//Unexpected resource deletion behavior
//Draft to be completed
//include::modules/ts-capi-migrate-unexpected-deletion-behavior.adoc[leveloffset=+1]

[id="ts-capi-resource-migration_{context}"]
== Troubleshooting resource migration

When you migrate a resource to use a different authoritative API, you might encounter issues during the migration process.
You might also notice unexpected behavior due to differences between the Cluster API and the Machine API.

//Authoritative API types of compute machines
include::modules/machine-set-authoritative-api-machines.adoc[leveloffset=+2]

//Unexpected machine counts after scaling
include::modules/ts-capi-migrate-unexpected-machine-counts-scaling.adoc[leveloffset=+2]

//Incomplete synchronization of labels and annotations 
include::modules/ts-capi-migrate-sync-label-annotation.adoc[leveloffset=+2]

//Migrating {aws-short} cloud credentials
//KCS draft not ready for publication
//include::modules/ts-capi-migrate-aws-creds.adoc[leveloffset=+2]

//Unsupported configuration options
include::modules/ts-capi-migrate-unsupported-features.adoc[leveloffset=+2]
