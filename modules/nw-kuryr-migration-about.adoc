// Module included in the following assemblies:
//
// * networking/ovn_kubernetes_network_provider/migrate-from-openshift-sdn.adoc

[id="nw-kuryr-ovn-kubernetes-migration-about_{context}"]
= Migration to the OVN-Kubernetes network provider

Migrating to the OVN-Kubernetes network plug-in is a manual process that includes some downtime during which your cluster is unreachable. Note, the migration is a one-way process.

A migration to the OVN-Kubernetes network plug-in is supported basically on {rh-openstack-first} based platform.

[id="considerations-kuryr-migrating-network-provider_{context}"]
== Considerations for migrating to the OVN-Kubernetes network provider

Kubernetes namespaces are kept by Kuryr in separate Neutron subnets. Those subnets and the IP addresses assigned to individual pods are not preserved during the migration.

[id="how-the-kuryr-migration-process-works_{context}"]
== How the migration process works

The following table summarizes the migration process by segmenting between the user-initiated steps in the process and the actions that the migration performs in response.

.Migrating to OVN-Kubernetes from Kuryr
[cols="1,1a",options="header"]
|===

|User-initiated steps|Migration activity

|
Set the `migration` field of the `Network.operator.openshift.io` custom resource (CR) named `cluster` to `OVNKubernetes`. Make sure the `migration` field is `null` before setting it to a value.
|
Cluster Network Operator (CNO):: Updates the status of the `Network.config.openshift.io` CR named `cluster` accordingly.
Machine Config Operator (MCO):: Rolls out an update to the systemd configuration necessary for OVN-Kubernetes; The MCO updates a single machine per pool at a time by default, causing the total time the migration takes to increase with the size of the cluster.

|Update the `networkType` field of the `Network.config.openshift.io` CR.
|
CNO:: Performs the following actions:
+
--
* Destroys the Kuryr control plane pods (Kuryr CNIs and Kuryr controller).
* Deploys the OVN-Kubernetes control plane pods.
* Updates the Multus objects to reflect the new network plug-in.
--

|
Reboot each node in the cluster.
|
Cluster:: As nodes reboot, the cluster assigns IP addresses to pods on the OVN-Kubernetes cluster network.

|
Clean up remaining resources Kuryr controlled.
|
Cluster:: There are {rh-openstack} resources which need to be freed, as well as the {product-title} resources to be sorted out.
|===
